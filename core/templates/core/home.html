{% extends "core/base.html" %}

{% block titulo_da_pagina %}
Biblioteca Digital - Col√©gio S√£o Bento
{% endblock %}

{% block conteudo %}
{% with request.GET.search as querystring %}

<!-- ======= T√≠tulo e Pesquisa ======= -->
<!-- <div class="text-center mb-4">

    {% comment %} T√≠tulo {% endcomment %}
    <h1 class="mb-3 text-center">
        üîç Pesquise
        <span class="d-none d-md-inline-block">Livros, Peri√≥dicos e Revistas</span>
        <span class="d-md-none"><br>Livros, Peri√≥dicos e Revistas</span>
    </h1>

    {% comment %} Pesquisa {% endcomment %}
    <form class="d-flex justify-content-center" role="search">
        <input class="form-control me-2 w-50" type="search" name="search" value="{{ querystring }}" placeholder="Digite sua busca..." aria-label="Search">
        <button class="btn btn-outline-success" type="submit">Buscar</button>
    </form>
</div> -->

<!-- ======= LISTAGEM DESKTOP (Tabela) ======= -->
<!-- {% if querystring %}
<div class="d-none d-md-block">
    <table class="table table-hover align-middle">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">T√≠tulo</th>
                <th scope="col">N√∫mero</th>
                <th scope="col">√Årea do Acervo</th>
                <th scope="col">Tipo</th>
                {% if user.is_authenticated %}
                    <th scope="col">A√ß√µes</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for item in itens %}
            <tr>
                <th scope="row">{{ item.id }}</th>

                {% comment %} Livros {% endcomment %}
                <td>
                    {% if item.tipo == "Livro" %}
                        <a href="{% url 'livros_detalhe' item.id %}">{{ item.titulo }}</a>
                    {% elif item.tipo == "Peri√≥dico" %}
                        <a href="{% url 'periodicos_detalhe' item.id %}">{{ item.titulo }}</a>
                    {% else %}
                        <a href="{% url 'revistas_detalhe' item.id %}">{{ item.titulo }}</a>
                    {% endif %}
                </td>

                {% comment %} Livros {% endcomment %}
                <td>
                    {% if item.tipo == "Livro" %}
                         <a href="{% url 'livros_detalhe' item.id %}">{{ item.num_tombamento }}</a>
                    {% elif item.tipo == "Peri√≥dico" %}
                        <a href="{% url 'periodicos_detalhe' item.id %}">{{ item.numero }}</a>
                    {% else %}
                        <a href="{% url 'revistas_detalhe' item.id %}">{{ item.numero }}</a>
                    {% endif %}
                </td>

                {% comment %} √Årea do acervo {% endcomment %}
                <td>
                    {% if item.tipo == "Livro" %}
                         <a href="{% url 'livros_detalhe' item.id %}">{{ item.area_acervo }}</a>
                    {% elif item.tipo == "Peri√≥dico" %}
                        <a href="{% url 'periodicos_detalhe' item.id %}">{{ item.area_acervo }}</a>
                    {% else %}
                        <a href="{% url 'revistas_detalhe' item.id %}">{{ item.area_acervo }}</a>
                    {% endif %}
                </td>

                 {% comment %} Tipo {% endcomment %}
                <td>
                    {% if item.tipo == "Livro" %}
                         <a href="{% url 'livros_detalhe' item.id %}">{{ item.tipo }}</a>
                    {% elif item.tipo == "Peri√≥dico" %}
                        <a href="{% url 'periodicos_detalhe' item.id %}">{{ item.tipo }}</a>
                    {% else %}
                        <a href="{% url 'revistas_detalhe' item.id %}">{{ item.tipo }}</a>
                    {% endif %}
                </td>

                {% comment %} A√ß√µes {% endcomment %}
                {% if user.is_authenticated %}
                <td>
                    {% if item.tipo == "Livro" %}
                        <a href="{% url 'livros_alterar' item.id %}" class="btn btn-success btn-sm">Editar</a>
                        <a href="{% url 'livros_excluir' item.id %}" class="btn btn-danger btn-sm">Excluir</a>
                    {% elif item.tipo == "Peri√≥dico" %}
                        <a href="{% url 'periodicos_alterar' item.id %}" class="btn btn-success btn-sm">Editar</a>
                        <a href="{% url 'periodicos_excluir' item.id %}" class="btn btn-danger btn-sm">Excluir</a>
                    {% else %}
                        <a href="{% url 'revistas_alterar' item.id %}" class="btn btn-success btn-sm">Editar</a>
                        <a href="{% url 'revistas_excluir' item.id %}" class="btn btn-danger btn-sm">Excluir</a>
                    {% endif %}
                </td>
                {% endif %}
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" class="text-center">Nenhum item encontrado.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %} -->

<!-- ======= LISTAGEM MOBILE (Cards) ======= -->
<!-- {% if querystring %}
<div class="d-md-none">
    <div class="row gy-3">
        {% for item in itens %}
        <div class="col-12">
            <div class="card border-dark shadow-sm">
                <div class="card-body p-3">
                    <h5 class="card-title mb-2">
                        {% if item.tipo == "Livro" %}
                            <a href="{% url 'livros_detalhe' item.id %}" class="text-decoration-none fw-bold">{{ item.titulo }}</a>
                        {% elif item.tipo == "Peri√≥dico" %}
                            <a href="{% url 'periodicos_detalhe' item.id %}" class="text-decoration-none fw-bold">{{ item.titulo }}</a>
                        {% else %}
                            <a href="{% url 'revistas_detalhe' item.id %}" class="text-decoration-none fw-bold">{{ item.titulo }}</a>
                        {% endif %}
                    </h5>
                    <p class="mb-1"><strong>N√∫mero:</strong>
                        {% if item.tipo == "Livro" %}
                            {{ item.num_tombamento }}
                        {% else %}
                            {{ item.numero }}
                        {% endif %}
                    </p>
                    <p class="mb-1"><strong>√Årea:</strong> {{ item.area_acervo }}</p>
                    <p class="mb-2"><strong>Tipo:</strong> {{ item.tipo }}</p>

                    {% if user.is_authenticated %}
                    <div class="d-flex justify-content-end gap-2">
                        {% if item.tipo == "Livro" %}
                            <a href="{% url 'livros_alterar' item.id %}" class="btn btn-success btn-sm">Editar</a>
                            <a href="{% url 'livros_excluir' item.id %}" class="btn btn-danger btn-sm">Excluir</a>
                        {% elif item.tipo == "Peri√≥dico" %}
                            <a href="{% url 'periodicos_alterar' item.id %}" class="btn btn-success btn-sm">Editar</a>
                            <a href="{% url 'periodicos_excluir' item.id %}" class="btn btn-danger btn-sm">Excluir</a>
                        {% else %}
                            <a href="{% url 'revistas_alterar' item.id %}" class="btn btn-success btn-sm">Editar</a>
                            <a href="{% url 'revistas_excluir' item.id %}" class="btn btn-danger btn-sm">Excluir</a>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-center mt-4">Nenhum item encontrado.</p>
        {% endfor %}
    </div>
</div>
{% endif %} -->


<!-- ======= Cabe√ßalho da Home ======= -->
<div class="text-center mb-5">

    <h1 class="fw-bold mb-3">
        Bem-vindos ao Acervo Digital<br>
        Col√©gio e Mosteiro S√£o Bento
    </h1>

    <p class="lead text-muted">
        Pesquise livros, revistas, peri√≥dicos, renove empr√©stimos e solicite acesso a arquivos hist√≥ricos.
    </p>
</div>

<!-- ======= Cards de Acesso R√°pido ======= -->
<div class="container mb-5">
    <div class="row row-cols-1 row-cols-md-3 g-4 justify-content-center">

        <!-- Card Livros (SUCCESS) -->
        <div class="col-md-4 col-lg-3">
            <div class="card h-100 shadow-sm border-success">
                <div class="card-body text-center">
                    <h5 class="card-title fw-bold">üìö Livros</h5>
                    <p class="card-text text-muted">Consulte t√≠tulos dispon√≠veis e acesse detalhes de cada obra.</p>
                    <a href="{% url 'livros_listar' %}" class="btn btn-success btn-sm">Acessar</a>
                </div>
            </div>
        </div>

        <!-- Card Revistas (WARNING) -->
        <div class="col-md-4 col-lg-3">
            <div class="card h-100 shadow-sm border-warning">
                <div class="card-body text-center">
                    <h5 class="card-title fw-bold">üì∞ Revistas</h5>
                    <p class="card-text text-muted">Explore edi√ß√µes e acervo completo de revistas.</p>
                    <a href="{% url 'revistas_listar' %}" class="btn btn-warning btn-sm text-dark">Acessar</a>
                </div>
            </div>
        </div>

        <!-- Card Peri√≥dicos (PRIMARY) -->
        <div class="col-md-4 col-lg-3">
            <div class="card h-100 shadow-sm border-primary">
                <div class="card-body text-center">
                    <h5 class="card-title fw-bold">üìñ Peri√≥dicos</h5>
                    <p class="card-text text-muted">Pesquise peri√≥dicos dispon√≠veis no acervo.</p>
                    <a href="{% url 'periodicos_listar' %}" class="btn btn-primary btn-sm">Acessar</a>
                </div>
            </div>
        </div>

        <!-- Card Arquivos Hist√≥ricos (SECONDARY) -->
        <div class="col-md-4 col-lg-3">
            <div class="card h-100 shadow-sm border-secondary">
                <div class="card-body text-center">
                    <h5 class="card-title fw-bold">üìú Arquivos Hist√≥ricos</h5>
                    <p class="card-text text-muted">Solicite acesso aos arquivos preservados da institui√ß√£o.</p>
                    <a href="" class="btn btn-secondary btn-sm">Solicitar</a>
                </div>
            </div>
        </div>

        <!-- Card Renova√ß√£o de Empr√©stimo (DARK) -->
        <div class="col-md-4 col-lg-3">
            <div class="card h-100 shadow-sm border-dark">
                <div class="card-body text-center">
                    <h5 class="card-title fw-bold">üîÑ Renova√ß√£o de Empr√©stimo</h5>
                    <p class="card-text text-muted">Renove online os empr√©stimos vinculados ao seu cadastro.</p>
                    <a href="" class="btn btn-dark btn-sm">Renovar</a>
                </div>
            </div>
        </div>

    </div>
</div>


{% endwith %}
{% endblock conteudo %}
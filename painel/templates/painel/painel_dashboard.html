{% extends "core/base.html" %}

{% block titulo_da_pagina %}
Dashboard
{% endblock %}

{% block conteudo %}
<div class="container-lg py-4">

    <!-- TÃ­tulo da pÃ¡gina -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>ğŸ  Dashboard</h1>
    </div>

   <!-- Cards de resumo (compactos) -->
    <div class="row mb-3">
        <div class="col-md-2 col-sm-4 mb-3">
            <div class="card text-white bg-success shadow-sm h-100">
                <div class="card-body py-2 px-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="card-title mb-1">Livros</h6>
                            <h4 class="mb-0">{{ total_livros }}</h4>
                        </div>
                        <div class="fs-3">ğŸ“š</div>
                    </div>
                </div>
                <div class="card-footer text-end py-1">
                    <a href="{% url 'livros_listar' %}" class="text-white text-decoration-none small">Ver detalhes â†’</a>
                </div>
            </div>
        </div>

        <div class="col-md-2 col-sm-4 mb-3">
            <div class="card text-white bg-primary shadow-sm h-100">
                <div class="card-body py-2 px-3 d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title mb-1">PeriÃ³dicos</h6>
                        <h4 class="mb-0">{{ total_periodicos }}</h4>
                    </div>
                    <div class="fs-3">ğŸ“°</div>
                </div>
                <div class="card-footer text-end py-1">
                    <a href="{% url 'periodicos_listar' %}" class="text-white text-decoration-none small">Ver detalhes â†’</a>
                </div>
            </div>
        </div>

        <div class="col-md-2 col-sm-4 mb-3">
            <div class="card text-white bg-warning shadow-sm h-100">
                <div class="card-body py-2 px-3 d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title mb-1">Revistas</h6>
                        <h4 class="mb-0">{{ total_revistas }}</h4>
                    </div>
                    <div class="fs-3">ğŸ—ï¸</div>
                </div>
                <div class="card-footer text-end py-1">
                    <a href="{% url 'revistas_listar' %}" class="text-white text-decoration-none small">Ver detalhes â†’</a>
                </div>
            </div>
        </div>

        <div class="col-md-2 col-sm-4 mb-3">
            <div class="card text-white bg-secondary shadow-sm h-100">
                <div class="card-body py-2 px-3 d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title mb-1">Arquivos</h6>
                        <h4 class="mb-0">{{ total_arquivos }}</h4>
                    </div>
                    <div class="fs-3">ğŸ“‚</div>
                </div>
                <div class="card-footer text-end py-1">
                    <a href="{% url 'arquivos_listar' %}" class="text-white text-decoration-none small">Ver detalhes â†’</a>
                </div>
            </div>
        </div>

        <div class="col-md-2 col-sm-4 mb-3">
            <div class="card text-white bg-purple shadow-sm h-100">
                <div class="card-body py-2 px-3 d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title mb-1">UsuÃ¡rios</h6>
                        <h4 class="mb-0">{{ total_usuarios }}</h4>
                    </div>
                    <div class="fs-3">ğŸ§‘â€ğŸ’»</div>
                </div>
                <div class="card-footer text-end py-1">
                    <a href="{% url 'painel_dashboard_usuarios_listar' %}" class="text-white text-decoration-none small">Ver detalhes â†’</a>
                </div>
            </div>
        </div>
    </div>


    <!-- Atalhos rÃ¡pidos -->
    <div class="mb-4">
        <h5>AÃ§Ãµes rÃ¡pidas</h5>
        <div class="d-flex flex-wrap gap-2">
            <a href="{% url 'livros_cadastrar' %}" class="btn btn-success btn-sm">Cadastrar Livro</a>
            <a href="{% url 'periodicos_cadastrar' %}" class="btn btn-primary btn-sm">Cadastrar PeriÃ³dico</a>
            <a href="{% url 'revistas_cadastrar' %}" class="btn btn-warning btn-sm">Cadastrar Revista</a>
            <a href="{% url 'arquivos_cadastrar' %}" class="btn btn-secondary btn-sm">Cadastrar Arquivo</a>
            <a href="{% url 'painel_dashboard_usuarios_cadastrar' %}" class="btn bg-purple btn-sm">Cadastrar UsuÃ¡rio</a>
        </div>
    </div>

    <!-- Ãšltimas atividades -->
    <div class="row">
        <div class="col-lg-8 mb-4">
            <div class="card shadow h-100">
                <div class="card-header">
                    Ãšltimas atividades
                </div>
                <div class="card-body p-0">
                    <table class="table table-striped mb-0">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>AÃ§Ã£o</th>
                                <th>UsuÃ¡rio</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for atividade in ultimas_atividades %}
                            <tr>
                                <td>{{ atividade.data|date:"d/m/Y H:i" }}</td>
                                <td>{{ atividade.acao }}</td>
                                <td>{{ atividade.usuario }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="3" class="text-center">Nenhuma atividade encontrada.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Perfil do usuÃ¡rio no canto direito -->
        <div class="col-lg-4 mb-4">
            <div class="card shadow text-center">
                <div class="card-body">
                    <div class="fs-1 mb-2">ğŸ§‘â€ğŸ’»</div>
                    <h5 class="card-title">{{ user.first_name }}</h5>
                    <p class="card-text">{{ user.email }}</p>
                    <a href="{% url 'painel_sair' %}" class="btn btn-outline-danger btn-sm w-100">Sair</a>
                </div>
            </div>
        </div>
    </div>

</div>
{% endblock %}

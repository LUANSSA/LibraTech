{% extends "core/base.html" %}

{% block titulo_da_pagina %}
Acervo - Peri贸dicos
{% endblock %}

{% block conteudo %}
{% with request.GET.search as querystring %}
<div>
    <!-- T铆tulo e Cadastro -->
    <section class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="mb-0"> Peri贸dicos</h1>
        {% if user.is_authenticated %}
            <a href="{% url 'periodicos_cadastrar' %}" type="button" class="btn btn-success btn-sm">Cadastrar Peri贸dico</a>
        {% else %}
            <span class="btn btn-success btn-sm invisible" aria-hidden="true">Cadastrar Peri贸dico</span>
        {% endif %}
    </section>

    <!-- Pesquisa -->
    <form class="d-flex mb-4" role="search">
        <input class="form-control me-2" type="search" name="search" value="{{ querystring }}" placeholder="Buscar peri贸dicos..." aria-label="Search">
        <button class="btn btn-outline-success" type="submit">Buscar</button>
    </form>
</div>

<!-- ======= LISTAGEM DESKTOP (Tabela) ======= -->
<div class="d-none d-md-block">
    <table class="table table-hover align-middle">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">T铆tulo</th>
                <th scope="col">rea do Acervo</th>
                <th scope="col">Assunto</th>
                <th scope="col">ISSN</th>
                {% if user.is_authenticated %}
                    <th scope="col">A莽玫es</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for periodico in periodicos %}
            <tr>
                <th scope="row"><a href="{% url 'periodicos_detalhe' periodico.id %}">{{ periodico.id }}</a></th>
                <td><a href="{% url 'periodicos_detalhe' periodico.id %}">{{ periodico.titulo }}</a></td>
                <td>{{ periodico.area_acervo }}</td>
                <td>{{ periodico.assunto }}</td>
                <td>{{ periodico.issn }}</td>
                {% if user.is_authenticated %}
                <td>
                    <a href="{% url 'periodicos_alterar' periodico.id %}" class="btn btn-success btn-sm">Editar</a>
                    <a href="{% url 'periodicos_excluir' periodico.id %}" class="btn btn-danger btn-sm">Excluir</a>
                </td>
                {% endif %}
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" class="text-center">Nenhum peri贸dico encontrado.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- ======= LISTAGEM MOBILE (Cards) ======= -->
<div class="d-md-none">
    <div class="row gy-3">
        {% for periodico in periodicos %}
        <div class="col-12">
            <div class="card border-dark shadow-sm">
                <div class="card-body p-3">
                    <h5 class="card-title mb-2">
                        <a href="{% url 'periodicos_detalhe' periodico.id %}" class="text-decoration-none fw-bold">
                            {{ periodico.titulo }}
                        </a>
                    </h5>
                    <a href="{% url 'periodicos_detalhe' periodico.id %}">
                        <p class="mb-1"><strong>rea:</strong> {{ periodico.area_acervo }}</p>
                        <p class="mb-1"><strong>Assunto:</strong> {{ periodico.assunto }}</p>
                        <p class="mb-2"><strong>ISSN:</strong> {{ periodico.issn }}</p>
                    </a>

                    {% if user.is_authenticated %}
                    <div class="d-flex justify-content-end gap-2">
                        <a href="{% url 'periodicos_alterar' periodico.id %}" class="btn btn-success btn-sm">Editar</a>
                        <a href="{% url 'periodicos_excluir' periodico.id %}" class="btn btn-danger btn-sm">Excluir</a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-center mt-4">Nenhum peri贸dico encontrado.</p>
        {% endfor %}
    </div>
</div>

{% include "core/paginacao.html" %}
{% endwith %}
{% endblock conteudo %}

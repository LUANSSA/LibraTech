{% extends "core/base.html" %}

{% block titulo_da_pagina %}
Acervo - Livros
{% endblock %}

{% block conteudo %}

{% with request.GET.search as querystring %}
<div>
    {% comment %} T√≠tulo e cadastro {% endcomment %}
    <section class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="mb-0">üìö Livros</h1>
        {% if user.is_authenticated %}
            <a href="{% url 'livros_cadastrar' %}" type="button" class="btn btn-success btn-sm">Cadastrar Livro</a>
        {% else %}
            <span class="btn btn-success btn-sm invisible" aria-hidden="true">Cadastrar Livro</span>
        {% endif %}
    </section>
    {% comment %} Pesquisar livro {% endcomment %}
    <form class="d-flex mb-4" role="search">
        <input class="form-control me-2" type="search" name="search" value="{{ querystring }}" placeholder="Buscar livros..." aria-label="Search">
        <button class="btn btn-outline-success" type="submit">Buscar</button>
    </form>
</div>

<!-- ======= LISTAGEM DESKTOP (Tabela) ======= -->
<div class="d-none d-md-block">
    <table class="table table-hover align-middle">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">T√≠tulo</th>
                <th scope="col">√Årea do Acervo</th>
                <th scope="col">N¬∫ de Tombamento</th>
                <th scope="col">Chamada</th>
                {% if user.is_authenticated %}
                    <th scope="col">A√ß√µes</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for livro in livros %}
            <tr>
                <th scope="row"><a href="{% url 'livros_detalhe' livro.id %}">{{ livro.id }}</a></th>
                <td><a href="{% url 'livros_detalhe' livro.id %}">{{ livro.titulo }}</a></td>
                <td>{{ livro.area_acervo }}</td>
                <td>{{ livro.num_tombamento }}</td>
                <td>{{ livro.chamada }}</td>
                {% if user.is_authenticated %}
                <td>
                    <a href="{% url 'livros_alterar' livro.id %}" class="btn btn-success btn-sm">Editar</a>
                    <a href="{% url 'livros_excluir' livro.id %}" class="btn btn-danger btn-sm">Excluir</a>
                </td>
                {% endif %}
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" class="text-center">Nenhum livro encontrado.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- ======= LISTAGEM MOBILE (Cards) ======= -->
<div class="d-md-none">
    <div class="row gy-3">
        {% for livro in livros %}
        <div class="col-12">
            <div class="card border-dark shadow-sm">
                <div class="card-body p-3">
                    <h5 class="card-title mb-2">
                        <a href="{% url 'livros_detalhe' livro.id %}" class="text-decoration-none fw-bold">
                            {{ livro.titulo }}
                        </a>
                    </h5>
                    <a href="{% url 'livros_detalhe' livro.id %}"><p class="mb-1"><strong>√Årea:</strong>{{ livro.area_acervo }}</p></a>
                    <a href="{% url 'livros_detalhe' livro.id %}"><p class="mb-1"><strong>Tombamento:</strong>{{ livro.num_tombamento }}</p></a>
                    <a href="{% url 'livros_detalhe' livro.id %}"><p class="mb-2"><strong>Chamada:</strong>{{ livro.chamada }}</p></a>

                    {% if user.is_authenticated %}
                    <div class="d-flex justify-content-end gap-2">
                        <a href="{% url 'livros_alterar' livro.id %}" class="btn btn-success btn-sm">Editar</a>
                        <a href="{% url 'livros_excluir' livro.id %}" class="btn btn-danger btn-sm">Excluir</a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-center mt-4">Nenhum livro encontrado.</p>
        {% endfor %}
    </div>
</div>

{% include "core/paginacao.html" %}
{% endwith %}
{% endblock conteudo %}
